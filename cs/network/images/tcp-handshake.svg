<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 350">
  <defs>
    <linearGradient id="clientNode" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498DB"/>
      <stop offset="100%" style="stop-color:#2980B9"/>
    </linearGradient>
    <linearGradient id="serverNode" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2ECC71"/>
      <stop offset="100%" style="stop-color:#27AE60"/>
    </linearGradient>
    <marker id="arrowRight" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#E74C3C"/>
    </marker>
    <marker id="arrowLeft" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#3498DB"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" fill="#2C3E50" font-family="Arial, sans-serif" font-size="14" font-weight="bold">3-way Handshake (연결 수립)</text>

  <!-- Client/Server labels -->
  <rect x="80" y="45" width="80" height="30" fill="url(#clientNode)" rx="5"/>
  <text x="120" y="65" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Client</text>

  <rect x="340" y="45" width="80" height="30" fill="url(#serverNode)" rx="5"/>
  <text x="380" y="65" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Server</text>

  <!-- Vertical lines -->
  <line x1="120" y1="75" x2="120" y2="280" stroke="#3498DB" stroke-width="3"/>
  <line x1="380" y1="75" x2="380" y2="280" stroke="#2ECC71" stroke-width="3"/>

  <!-- Step 1: SYN -->
  <line x1="120" y1="110" x2="370" y2="110" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowRight)"/>
  <rect x="200" y="95" width="100" height="22" fill="#E74C3C" rx="3"/>
  <text x="250" y="110" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">SYN</text>
  <text x="405" y="110" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="9">1. 연결 요청</text>
  <text x="405" y="122" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="8">(ISN=100)</text>

  <!-- Step 2: SYN-ACK -->
  <line x1="380" y1="160" x2="130" y2="160" stroke="#3498DB" stroke-width="2" marker-end="url(#arrowLeft)"/>
  <rect x="200" y="145" width="100" height="22" fill="#3498DB" rx="3"/>
  <text x="250" y="160" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">SYN-ACK</text>
  <text x="35" y="160" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="9">2. 수락</text>
  <text x="35" y="172" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="8">(ISN=300, ACK=101)</text>

  <!-- Step 3: ACK -->
  <line x1="120" y1="210" x2="370" y2="210" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowRight)"/>
  <rect x="200" y="195" width="100" height="22" fill="#9B59B6" rx="3"/>
  <text x="250" y="210" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ACK</text>
  <text x="405" y="210" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="9">3. 확인</text>
  <text x="405" y="222" fill="#7F8C8D" font-family="Arial, sans-serif" font-size="8">(ACK=301)</text>

  <!-- Connection established -->
  <line x1="100" y1="260" x2="400" y2="260" stroke="#27AE60" stroke-width="3" stroke-dasharray="10,5"/>
  <text x="250" y="280" text-anchor="middle" fill="#27AE60" font-family="Arial, sans-serif" font-size="11" font-weight="bold">연결 수립 완료</text>
</svg>