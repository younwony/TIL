# OSI 7계층 (OSI 7 Layer Model)

> `[2] 입문` · 선수 지식: [네트워크란](./what-is-network.md)

> 네트워크 통신을 7개의 계층으로 표준화한 참조 모델

`#OSI` `#OSI7계층` `#OSI7Layer` `#네트워크계층` `#물리계층` `#PhysicalLayer` `#데이터링크` `#DataLinkLayer` `#네트워크계층` `#NetworkLayer` `#전송계층` `#TransportLayer` `#세션계층` `#SessionLayer` `#표현계층` `#PresentationLayer` `#응용계층` `#ApplicationLayer` `#TCP` `#IP` `#HTTP` `#MAC주소` `#캡슐화` `#Encapsulation`

## 왜 알아야 하는가?

OSI 7계층은 네트워크 문제를 체계적으로 분석하는 프레임워크입니다. "연결이 안 된다"라는 문제가 물리적 케이블 문제인지(1계층), IP 설정 문제인지(3계층), 애플리케이션 문제인지(7계층) 구분할 수 있습니다. 면접에서도 자주 나오는 기본 개념입니다.

## 핵심 개념

- **OSI 모델**: 국제표준화기구(ISO)가 정의한 네트워크 통신 7계층 참조 모델
- **캡슐화 (Encapsulation)**: 상위 계층 데이터에 헤더를 추가하며 하위 계층으로 전달
- **역캡슐화 (Decapsulation)**: 수신 측에서 헤더를 제거하며 상위 계층으로 전달
- **PDU (Protocol Data Unit)**: 각 계층의 데이터 단위 (세그먼트, 패킷, 프레임 등)

## 쉽게 이해하기

**OSI 7계층**을 국제 택배에 비유할 수 있습니다.

편지를 외국에 보낸다고 상상해보세요:

1. **응용 계층**: 편지 내용 작성
2. **표현 계층**: 번역 (상대방 언어로)
3. **세션 계층**: 주고받을 순서 정하기
4. **전송 계층**: 등기/일반 선택 (신뢰성)
5. **네트워크 계층**: 국제 배송 경로 결정
6. **데이터 링크 계층**: 각 구간별 배송
7. **물리 계층**: 실제 트럭, 비행기로 이동

## 상세 설명

### OSI 7계층 전체 구조

```
┌─────────────────────────────────────────────────────────────┐
│  계층    │    이름        │   기능          │  프로토콜/장비 │
├──────────┼────────────────┼─────────────────┼───────────────┤
│ 7. 응용  │ Application    │ 사용자 서비스   │ HTTP, FTP     │
│ 6. 표현  │ Presentation   │ 데이터 변환     │ SSL, JPEG     │
│ 5. 세션  │ Session        │ 연결 관리       │ NetBIOS       │
├──────────┼────────────────┼─────────────────┼───────────────┤
│ 4. 전송  │ Transport      │ 신뢰성/흐름제어 │ TCP, UDP      │
├──────────┼────────────────┼─────────────────┼───────────────┤
│ 3. 네트워크│ Network       │ 경로 결정       │ IP, 라우터    │
│ 2. 데이터링크│ Data Link   │ 물리주소, 오류  │ 이더넷, 스위치│
│ 1. 물리  │ Physical       │ 전기신호 전송   │ 케이블, 허브  │
└─────────────────────────────────────────────────────────────┘
```

### 각 계층 상세

#### 1계층: 물리 계층 (Physical Layer)

**역할**: 비트를 전기/광/무선 신호로 변환하여 전송

```
데이터: 01101001

      ┌─────────────────────────────────────────┐
      │ 전기신호: ─┐ ┌─┐ ┌───┐ ┌─┐             │
      │           └─┘ └─┘     └─┘              │
      │ 0  1  1  0  1  0  0  1                 │
      └─────────────────────────────────────────┘
```

**특징**:
- 데이터 단위: **비트 (bit)**
- 관련 장비: 케이블, 허브, 리피터
- 관심사: 전압, 핀 배치, 케이블 규격

#### 2계층: 데이터 링크 계층 (Data Link Layer)

**역할**: 같은 네트워크(LAN) 내 기기 간 전송, 오류 감지

```
┌────────────────────────────────────────────────┐
│                    프레임                       │
├──────────┬──────────┬────────────┬────────────┤
│ 목적지MAC │ 출발지MAC │   데이터    │    FCS    │
│ (6바이트) │ (6바이트) │            │ (오류검출) │
└──────────┴──────────┴────────────┴────────────┘
```

**특징**:
- 데이터 단위: **프레임 (Frame)**
- 주소: **MAC 주소** (48비트, 하드웨어 고유)
- 관련 장비: 스위치, 브릿지
- 기능: 오류 감지 (CRC), 흐름 제어

**MAC 주소 예시**:
```
00:1A:2B:3C:4D:5E
└───────┘ └───────┘
  제조사    일련번호
```

#### 3계층: 네트워크 계층 (Network Layer)

**역할**: 서로 다른 네트워크 간 전송, 최적 경로 결정

```
┌────────────────────────────────────────────────┐
│                    패킷                         │
├──────────┬──────────┬──────────┬──────────────┤
│  버전    │ 출발지IP  │ 목적지IP │    데이터    │
│ TTL 등   │          │          │              │
└──────────┴──────────┴──────────┴──────────────┘
```

**특징**:
- 데이터 단위: **패킷 (Packet)**
- 주소: **IP 주소** (논리적 주소)
- 관련 장비: 라우터
- 프로토콜: IP, ICMP, ARP

**라우팅**:
```
서울 → 부산으로 가는 경로 결정
경로 1: 서울 → 대전 → 부산 (200km)
경로 2: 서울 → 대구 → 부산 (250km)
→ 경로 1 선택 (최적 경로)
```

#### 4계층: 전송 계층 (Transport Layer)

**역할**: 종단 간(End-to-End) 신뢰성 있는 전송

```
┌────────────────────────────────────────────────┐
│                   세그먼트                      │
├──────────┬──────────┬──────────┬──────────────┤
│ 출발포트  │ 목적포트  │ 순서번호 │    데이터    │
│          │          │ 확인응답 │              │
└──────────┴──────────┴──────────┴──────────────┘
```

**특징**:
- 데이터 단위: **세그먼트 (Segment)**
- 주소: **포트 번호** (0~65535)
- 프로토콜: TCP, UDP

**TCP vs UDP**:

| 항목 | TCP | UDP |
|------|-----|-----|
| 연결 | 연결 지향 (3-way handshake) | 비연결 |
| 신뢰성 | 보장 (재전송, 순서 보장) | 미보장 |
| 속도 | 느림 | 빠름 |
| 사용처 | 웹, 이메일, 파일 전송 | 스트리밍, 게임, DNS |

#### 5계층: 세션 계층 (Session Layer)

**역할**: 통신 세션 설정, 유지, 종료

**특징**:
- 동기화 (체크포인트)
- 대화 관리 (전이중/반이중)
- 예: NetBIOS, RPC

#### 6계층: 표현 계층 (Presentation Layer)

**역할**: 데이터 형식 변환, 암호화/복호화, 압축

**특징**:
- 인코딩: ASCII, UTF-8, JPEG, MPEG
- 암호화: SSL/TLS
- 압축: gzip

```
애플리케이션 데이터 → 암호화 → 압축 → 전송
                    ← 복호화 ← 해제 ← 수신
```

#### 7계층: 응용 계층 (Application Layer)

**역할**: 사용자와 네트워크 서비스를 연결

**특징**:
- 프로토콜: HTTP, FTP, SMTP, DNS
- 사용자가 직접 접하는 계층

### 캡슐화와 역캡슐화

```
송신 측 (캡슐화)                    수신 측 (역캡슐화)
──────────────                    ──────────────

┌──────────────┐                  ┌──────────────┐
│    Data      │  ← 7. 응용       │    Data      │
├──────────────┤                  ├──────────────┤
│  H6 + Data   │  ← 6. 표현       │  H6 + Data   │
├──────────────┤                  ├──────────────┤
│ H5+H6+Data   │  ← 5. 세션       │ H5+H6+Data   │
├──────────────┤                  ├──────────────┤
│H4+H5+H6+Data │  ← 4. 전송       │H4+H5+H6+Data │
├──────────────┤  (세그먼트)       ├──────────────┤
│H3+ 세그먼트   │  ← 3. 네트워크   │H3+ 세그먼트   │
├──────────────┤  (패킷)          ├──────────────┤
│H2+   패킷    │  ← 2. 데이터링크  │H2+   패킷    │
├──────────────┤  (프레임)         ├──────────────┤
│   비트 스트림 │  ← 1. 물리       │   비트 스트림 │
└──────────────┘                  └──────────────┘
       │                                │
       └────────── 네트워크 ────────────┘
```

### TCP/IP 4계층과 비교

```
    OSI 7계층              TCP/IP 4계층
┌───────────────┐      ┌───────────────┐
│ 7. 응용       │      │               │
├───────────────┤      │ 4. 응용       │
│ 6. 표현       │      │               │
├───────────────┤      │               │
│ 5. 세션       │      │               │
├───────────────┤      ├───────────────┤
│ 4. 전송       │      │ 3. 전송       │
├───────────────┤      ├───────────────┤
│ 3. 네트워크   │      │ 2. 인터넷     │
├───────────────┤      ├───────────────┤
│ 2. 데이터링크 │      │               │
├───────────────┤      │ 1. 네트워크   │
│ 1. 물리       │      │   액세스      │
└───────────────┘      └───────────────┘
```

## 트레이드오프

| 계층 | 추상화 수준 | 성능 영향 |
|------|------------|----------|
| 상위 계층 (5-7) | 높음 | 개발 편의, 오버헤드 ↑ |
| 하위 계층 (1-3) | 낮음 | 제어 가능, 복잡도 ↑ |

## 면접 예상 질문

### Q: OSI 7계층을 설명해주세요.

A: OSI 7계층은 네트워크 통신을 7개 계층으로 표준화한 모델입니다. 하위부터 (1) **물리**: 전기신호 전송 (2) **데이터 링크**: MAC 주소, 오류 감지 (3) **네트워크**: IP 주소, 라우팅 (4) **전송**: TCP/UDP, 포트 (5) **세션**: 연결 관리 (6) **표현**: 암호화, 압축 (7) **응용**: HTTP, FTP 등 사용자 서비스. **왜 중요한가?** 문제 발생 시 어느 계층 문제인지 체계적으로 분석할 수 있습니다.

### Q: 2계층과 3계층의 차이는?

A: **2계층(데이터 링크)**는 MAC 주소를 사용하여 **같은 네트워크(LAN)** 내 통신을 담당하고, 스위치가 대표 장비입니다. **3계층(네트워크)**는 IP 주소를 사용하여 **서로 다른 네트워크** 간 통신과 최적 경로 결정을 담당하고, 라우터가 대표 장비입니다. **왜 분리되어 있나?** MAC은 하드웨어 고유 주소라 변경 불가, IP는 논리적 주소라 네트워크 구조에 따라 할당 가능합니다.

### Q: TCP와 UDP의 차이는?

A: **TCP**는 연결 지향(3-way handshake), 신뢰성 보장(재전송, 순서 보장), 흐름/혼잡 제어를 제공합니다. **UDP**는 비연결, 신뢰성 미보장, 빠른 전송이 특징입니다. **사용처**: TCP는 웹, 이메일, 파일 전송처럼 데이터 손실이 허용되지 않는 경우. UDP는 실시간 스트리밍, 게임, DNS처럼 속도가 중요하고 약간의 손실이 허용되는 경우에 사용합니다.

## 연관 문서

| 문서 | 연관성 | 난이도 |
|------|--------|--------|
| [네트워크란](./what-is-network.md) | 선수 지식 | [1] 정의 |
| [HTTP/HTTPS](./http-https.md) | 7계층 프로토콜 | [3] 중급 |
| [TCP/IP](./tcp-ip.md) | 핵심 프로토콜 | [3] 중급 |

## 참고 자료

- Computer Networking: A Top-Down Approach - Kurose & Ross
- [Cloudflare - What is OSI Model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/)
