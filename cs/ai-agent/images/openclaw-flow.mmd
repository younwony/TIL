sequenceDiagram
    autonumber
    participant U as ğŸ‘¤ ì‚¬ìš©ì
    participant M as ğŸ’¬ ë©”ì‹œì§• ì•±<br/>(WhatsApp/Slack)
    participant G as ğŸ¦ Gateway ì½”ì–´<br/>(ë¡œì»¬ ì‹¤í–‰)
    participant Mem as ğŸ“ Memory<br/>(ë¡œì»¬ Markdown)
    participant MCP as ğŸ”Œ MCP<br/>ì¸í„°í˜ì´ìŠ¤
    participant LLM as ğŸ¤– LLM API<br/>(Claude/GPT)
    participant Svc as ğŸŒ ì™¸ë¶€ ì„œë¹„ìŠ¤<br/>(100+)

    Note over G: Heartbeat: ë°±ê·¸ë¼ìš´ë“œ ìƒì‹œ ì‹¤í–‰

    U->>M: "ë‚´ì¼ ë¯¸íŒ… ìë£Œ ì¤€ë¹„í•´ì¤˜"
    M->>G: ë©”ì‹œì§€ ì „ë‹¬

    G->>Mem: ì‚¬ìš©ì ì„ í˜¸ë„/ê³¼ê±° ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ
    Mem-->>G: ì‚¬ìš©ì í”„ë¡œí•„ + ì´ì „ ëŒ€í™” ê¸°ë¡

    G->>LLM: í”„ë¡¬í”„íŠ¸ + ì»¨í…ìŠ¤íŠ¸ ì „ì†¡
    LLM-->>G: ì‘ì—… ê³„íš (Tool Call ëª©ë¡)

    rect rgb(230, 245, 255)
        Note over G,Svc: Computer Access - ììœ¨ ì‘ì—… ìˆ˜í–‰
        G->>MCP: ìº˜ë¦°ë” ì¡°íšŒ ìš”ì²­
        MCP->>Svc: Google Calendar API
        Svc-->>MCP: ë¯¸íŒ… ì •ë³´ ë°˜í™˜
        MCP-->>G: ë¯¸íŒ… ìƒì„¸ ì •ë³´

        G->>MCP: íŒŒì¼ ê²€ìƒ‰ + ìš”ì•½
        MCP-->>G: ê´€ë ¨ ë¬¸ì„œ ëª©ë¡

        G->>MCP: ì´ë©”ì¼ ì „ì†¡
        MCP->>Svc: Gmail API
        Svc-->>MCP: ì „ì†¡ ì™„ë£Œ
        MCP-->>G: ì™„ë£Œ í™•ì¸
    end

    G->>Mem: ì‘ì—… ê²°ê³¼ + ì»¨í…ìŠ¤íŠ¸ ì €ì¥
    G->>M: "ë¯¸íŒ… ìë£Œë¥¼ ì°¸ì„ìì—ê²Œ ì „ì†¡í–ˆìŠµë‹ˆë‹¤"
    M->>U: ê²°ê³¼ ì•Œë¦¼
