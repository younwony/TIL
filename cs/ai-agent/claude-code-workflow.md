# Claude Code 워크플로우

> `[3] 중급` · 선수 지식: [AI Agent란](./ai-agent.md), [Claude Code Skill](./claude-code-skill.md)

> Claude Code의 효율적인 사용법과 실무 최적화 전략

`#ClaudeCode` `#클로드코드` `#AIWorkflow` `#병렬세션` `#ParallelSession` `#Opus` `#CLAUDE.md` `#PlanMode` `#AutoAccept` `#SlashCommand` `#피드백루프` `#FeedbackLoop` `#권한관리` `#Permissions` `#AIAgent` `#개발생산성` `#Anthropic` `#CLI` `#터미널` `#GitHubAction` `#CodeReview` `#자동화`

## 왜 알아야 하는가?

- **실무**: Claude Code 창시자의 실제 워크플로우로 개발 생산성 극대화
- **효율성**: 병렬 세션, Plan 모드, 자동화로 작업 속도 2~3배 향상
- **품질**: 검증 피드백 루프로 최종 결과물 품질 대폭 개선

## 핵심 개념

- **병렬 세션**: 여러 Claude 인스턴스를 동시에 실행하여 작업 처리량 증가
- **Plan 모드**: 코드 작성 전 계획을 충분히 다듬는 사전 설계 단계
- **CLAUDE.md**: 팀이 공유하는 Claude 행동 규칙 문서
- **검증 피드백 루프**: 결과물을 지속적으로 검증하여 품질 보장

## 쉽게 이해하기

**비유: 건축 현장의 작업 방식**

- **병렬 세션**: 여러 팀이 동시에 다른 층을 시공
- **Plan 모드**: 착공 전 설계도를 완벽하게 검토
- **CLAUDE.md**: 현장 작업 매뉴얼
- **피드백 루프**: 각 공정마다 품질 검사

## 상세 설명

### 1. 병렬 세션 관리

Claude Code 창시자 Boris Cherny의 워크플로우:

```
┌─────────────────────────────────────────────────────────────────┐
│                    병렬 세션 운영 전략                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  터미널 세션 (5개)                                               │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                        │
│  │ #1  │ │ #2  │ │ #3  │ │ #4  │ │ #5  │                        │
│  │기능A│ │기능B│ │버그 │ │리팩 │ │테스트│                        │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘                        │
│                                                                  │
│  웹 세션 (5~10개)                                                │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                        │
│  │문서 │ │리서치│ │코드  │ │설계 │ │ ... │                       │
│  │작성 │ │     │ │리뷰  │ │검토 │ │     │                        │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘                        │
│                                                                  │
│  운영 팁:                                                        │
│  • 각 탭에 번호 부여 (#1, #2, ...)                               │
│  • 시스템 알림으로 입력 필요 시점 파악                           │
│  • 작업 성격별로 세션 분리                                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### 세션 분리 전략

| 세션 유형 | 용도 | 특징 |
|----------|------|------|
| 기능 개발 | 새 기능 구현 | Plan 모드 → Auto-accept |
| 버그 수정 | 이슈 해결 | 빠른 반복, 테스트 중심 |
| 리팩토링 | 코드 개선 | 신중한 검토 필요 |
| 문서화 | README, 주석 | 웹 세션 활용 |
| 리서치 | 기술 조사 | 웹 검색 활용 |

### 2. 모델 선택 전략

```
┌─────────────────────────────────────────────────────────────────┐
│                    모델 선택 가이드                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Opus 4.5 with Thinking (권장)                                   │
│  ├─ 장점: 도구 활용 능력 최고, 조정 최소화                       │
│  ├─ 단점: 느림                                                   │
│  └─ 결과: "느리지만 결과적으로 더 빠름"                          │
│                                                                  │
│  Sonnet                                                          │
│  ├─ 장점: 빠른 응답                                              │
│  ├─ 단점: 추가 조정 필요                                         │
│  └─ 용도: 간단한 작업, 빠른 반복                                 │
│                                                                  │
│  Haiku                                                           │
│  ├─ 장점: 가장 빠름, 저비용                                      │
│  ├─ 단점: 복잡한 작업 한계                                       │
│  └─ 용도: 단순 질의, 포맷팅                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**왜 Opus를 사용하는가?**

> "모든 작업에 Opus 4.5 with thinking을 사용합니다. 지금까지의 최고 코딩 모델입니다. 느리지만 조정이 적게 필요하고 도구 활용 능력이 뛰어나 결과적으로 더 빠른 최종 결과를 제공합니다."
> — Boris Cherny, Claude Code 창시자

### 3. CLAUDE.md 활용

팀이 공유하는 단일 문서로, git에 체크인하여 버전 관리합니다.

#### CLAUDE.md 작성 원칙

```markdown
# CLAUDE.md

## 프로젝트 컨텍스트
- 프로젝트 개요
- 기술 스택
- 폴더 구조

## 코딩 규칙
- 네이밍 컨벤션
- 코드 스타일
- 금지 패턴

## 실수 방지 규칙 (핵심!)
- Claude가 잘못된 행동을 할 때마다 추가
- 구체적인 예시와 함께 기록
- "하지 마세요" 보다 "이렇게 하세요" 형태로

## Git 규칙
- 커밋 메시지 형식
- 브랜치 전략
```

#### 실수 방지 규칙 예시

```markdown
## 실수 방지 규칙

### 파일 생성
- 새 파일 생성보다 기존 파일 수정 우선
- README.md 등 문서는 요청 없이 생성하지 않음

### 코드 스타일
- console.log 대신 로깅 라이브러리 사용
- any 타입 사용 금지
- 매직 넘버 대신 상수 정의

### 테스트
- 기능 구현 후 반드시 테스트 코드 작성
- 테스트 실행 후 결과 확인
```

#### 코드 리뷰 통합

```bash
# PR에서 @.claude 태그하여 CLAUDE.md 업데이트 제안
# Claude Code GitHub Action 활용

# .github/workflows/claude-review.yml
name: Claude Code Review
on: [pull_request]
jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: anthropics/claude-code-action@v1
        with:
          review: true
          update-claude-md: true
```

### 4. Plan 모드 활용

가장 효과적인 워크플로우 패턴:

```
┌─────────────────────────────────────────────────────────────────┐
│                    Plan → Auto-accept 워크플로우                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [1단계] Plan 모드 시작                                          │
│  ├─ 요구사항 분석                                                │
│  ├─ 아키텍처 설계                                                │
│  ├─ 구현 계획 수립                                               │
│  └─ 계획 충분히 다듬기 (이 단계가 핵심!)                         │
│            │                                                     │
│            ▼                                                     │
│  [2단계] 계획 검토                                               │
│  ├─ 사용자: 계획 확인 및 피드백                                  │
│  ├─ Claude: 계획 수정                                            │
│  └─ 반복: 만족할 때까지                                          │
│            │                                                     │
│            ▼                                                     │
│  [3단계] Auto-accept 모드 전환                                   │
│  ├─ 한 번에 구현 완성                                            │
│  ├─ 중간 확인 최소화                                             │
│  └─ 속도 극대화                                                  │
│            │                                                     │
│            ▼                                                     │
│  [4단계] 검증                                                    │
│  ├─ 테스트 실행                                                  │
│  ├─ 결과 확인                                                    │
│  └─ 필요시 수정                                                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### Plan 모드 진입

```bash
# 세션 시작 시 Plan 모드로
claude --plan

# 또는 대화 중 전환
# "Plan 모드로 전환해줘"
# "먼저 계획부터 세워줘"
```

### 5. 검증 피드백 루프

**최종 결과물 품질을 2~3배 향상시키는 가장 중요한 요소**

```
┌─────────────────────────────────────────────────────────────────┐
│                    검증 피드백 루프                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  구현 완료                                                       │
│       │                                                          │
│       ▼                                                          │
│  ┌─────────────────┐                                             │
│  │    테스트 실행   │ ← 자동화된 테스트 스위트                    │
│  └────────┬────────┘                                             │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │    결과 확인     │ ← Chrome 확장, 브라우저 테스트              │
│  └────────┬────────┘                                             │
│           │                                                      │
│     ┌─────┴─────┐                                                │
│     ▼           ▼                                                │
│  [통과]      [실패]                                              │
│     │           │                                                │
│     ▼           ▼                                                │
│  완료!      피드백 전달                                          │
│                 │                                                │
│                 ▼                                                │
│            수정 후 재테스트 ──────────────────────────┐          │
│                                                       │          │
│                                      (루프 반복) ◀────┘          │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### 검증 방법

| 유형 | 방법 | 도구 |
|------|------|------|
| 유닛 테스트 | 테스트 스위트 실행 | Jest, JUnit, pytest |
| 통합 테스트 | API 엔드포인트 검증 | Postman, curl |
| E2E 테스트 | 브라우저 자동화 | Playwright, Cypress |
| 수동 검증 | Chrome 확장으로 확인 | DevTools, 확장 프로그램 |

### 6. 슬래시 커맨드 자동화

`.claude/commands/` 디렉토리에 저장되어 반복 작업을 자동화합니다.

#### 필수 슬래시 커맨드

```bash
# .claude/commands/commit-push-pr.md
---
description: 커밋, 푸시, PR 생성을 한 번에
---
1. 변경된 파일을 스테이징합니다
2. 의미 있는 커밋 메시지를 작성합니다
3. 원격 브랜치에 푸시합니다
4. PR을 생성하고 URL을 반환합니다
```

```bash
# .claude/commands/test-fix.md
---
description: 테스트 실행 후 실패 항목 수정
---
1. 테스트 스위트를 실행합니다
2. 실패한 테스트를 분석합니다
3. 코드를 수정합니다
4. 다시 테스트를 실행하여 확인합니다
```

```bash
# .claude/commands/review-code.md
---
description: 현재 변경사항 코드 리뷰
---
1. git diff로 변경사항 확인
2. 코드 품질, 보안, 성능 관점에서 리뷰
3. 개선 사항 제안
4. CLAUDE.md 업데이트 필요 여부 확인
```

#### 사용 빈도

> "슬래시 커맨드를 매일 수십 번 사용합니다. `/commit-push-pr` 하나로 반복 작업 시간을 크게 줄였습니다."

### 7. 안전한 권한 관리

```
┌─────────────────────────────────────────────────────────────────┐
│                    권한 관리 Best Practice                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ❌ 하지 마세요                                                  │
│  └─ --dangerously-skip-permissions 사용                          │
│      • 모든 권한 체크 무시                                       │
│      • 보안 위험                                                 │
│                                                                  │
│  ✅ 이렇게 하세요                                                │
│  └─ /permissions로 안전한 명령 사전 허용                         │
│      • 필요한 명령만 선택적 허용                                 │
│      • 감사 로그 유지                                            │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

#### 권한 설정 예시

```bash
# /permissions 명령으로 허용할 명령 설정
/permissions

# 허용 예시
Allow: git add, git commit, git push
Allow: npm test, npm run build
Allow: cat, ls, grep

# 차단 유지
Block: rm -rf, sudo, curl | bash
```

## 워크플로우 체크리스트

```
┌─────────────────────────────────────────────────────────────────┐
│                    일일 워크플로우 체크리스트                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  세션 시작                                                       │
│  ☐ 필요한 만큼 터미널 세션 열기                                  │
│  ☐ 각 세션에 작업 할당                                          │
│  ☐ Opus 4.5 with thinking 설정 확인                             │
│                                                                  │
│  작업 진행                                                       │
│  ☐ Plan 모드로 계획 수립                                        │
│  ☐ 계획 충분히 검토 및 수정                                     │
│  ☐ Auto-accept로 구현                                           │
│  ☐ 테스트 실행 및 검증                                          │
│                                                                  │
│  작업 완료                                                       │
│  ☐ /commit-push-pr로 PR 생성                                    │
│  ☐ Claude 실수 발견 시 CLAUDE.md 업데이트                       │
│  ☐ 슬래시 커맨드 개선점 기록                                    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## 면접 예상 질문

### Q: Claude Code를 효율적으로 사용하는 방법은?

A: **핵심은 Plan 모드와 검증 피드백 루프**입니다.

1. **Plan 모드 활용**: 코드 작성 전 계획을 충분히 다듬고, 만족스러우면 Auto-accept로 전환하여 한 번에 구현
2. **검증 피드백 루프**: 구현 후 반드시 테스트 실행하여 결과 확인, 실패 시 피드백 전달하여 수정
3. **CLAUDE.md**: 실수 패턴을 문서화하여 같은 실수 방지

이 방식으로 최종 결과물 품질이 2~3배 향상됩니다.

### Q: 병렬 세션을 왜 사용하는가?

A: **작업 처리량과 컨텍스트 분리**를 위해서입니다.

1. **처리량 증가**: 5개 터미널 + 5~10개 웹 세션으로 동시에 여러 작업 진행
2. **컨텍스트 분리**: 기능 개발, 버그 수정, 문서화 등 작업 성격별로 세션 분리
3. **대기 시간 활용**: 한 세션이 처리 중일 때 다른 세션에서 작업

### Q: CLAUDE.md를 어떻게 관리하는가?

A: **팀 공유 문서로 git에 체크인**합니다.

1. Claude가 잘못된 행동을 할 때마다 규칙 추가
2. PR 리뷰 시 @.claude 태그로 CLAUDE.md 업데이트 제안
3. 구체적인 예시와 함께 "이렇게 하세요" 형태로 작성
4. GitHub Action으로 자동화된 업데이트 가능

## 연관 문서

| 문서 | 연관성 | 난이도 |
|------|--------|--------|
| [AI Agent란](./ai-agent.md) | 기본 개념 | 정의 |
| [Claude Code Skill](./claude-code-skill.md) | 기능 확장 | 중급 |
| [Claude Code Slash Command](./claude-code-slash-command.md) | 자동화 | 중급 |
| [Claude Code Hook](./claude-code-hook.md) | 생명주기 자동화 | 중급 |
| [Claude Code Sub Agent](./claude-code-sub-agent.md) | 병렬 실행 | 심화 |

## 참고 자료

- [GeekNews - Claude Code 사용법](https://news.hada.io/topic?id=25570)
- [Claude Code 공식 문서](https://docs.anthropic.com/en/docs/claude-code)
- [Anthropic Claude Code GitHub](https://github.com/anthropics/claude-code)
