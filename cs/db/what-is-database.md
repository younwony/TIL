# 데이터베이스란 (What is Database)

> `[1] 정의/기초` · 선수 지식: 없음

> 데이터를 체계적으로 저장, 관리, 검색할 수 있도록 구성된 데이터의 집합과 이를 관리하는 시스템

`#데이터베이스` `#Database` `#DB` `#DBMS` `#DatabaseManagementSystem` `#RDBMS` `#관계형데이터베이스` `#RelationalDatabase` `#NoSQL` `#SQL` `#테이블` `#Table` `#스키마` `#Schema` `#레코드` `#Record` `#Row` `#컬럼` `#Column` `#필드` `#Field` `#기본키` `#PrimaryKey` `#외래키` `#ForeignKey` `#MySQL` `#PostgreSQL` `#Oracle` `#MongoDB` `#Redis`

## 왜 알아야 하는가?

데이터베이스는 모든 애플리케이션의 핵심입니다. 회원 정보, 주문 내역, 상품 데이터 등 비즈니스에 필요한 모든 정보는 데이터베이스에 저장됩니다. 파일 시스템 대신 데이터베이스를 사용하는 이유, RDBMS와 NoSQL의 차이, 기본 용어들을 이해해야 백엔드 개발의 기초를 다질 수 있습니다. 이 개념들은 인덱스, 트랜잭션, 정규화 등 모든 DB 심화 학습의 기반이 됩니다.

## 핵심 개념

- **데이터베이스 (Database)**: 체계적으로 저장된 데이터의 집합
- **DBMS (Database Management System)**: 데이터베이스를 관리하는 소프트웨어
- **RDBMS (Relational DBMS)**: 테이블(관계) 기반의 데이터베이스 관리 시스템
- **NoSQL**: 비관계형 데이터베이스 (Not Only SQL)
- **스키마 (Schema)**: 데이터베이스의 구조와 제약 조건을 정의한 것

## 쉽게 이해하기

**데이터베이스**를 도서관에 비유할 수 있습니다.

- **파일 시스템**: 책들을 방 바닥에 무작위로 쌓아둔 상태
  - 원하는 책 찾기 어려움
  - 같은 책이 여러 개 있는지 모름
  - 여러 사람이 동시에 같은 책 사용 불가

- **데이터베이스**: 체계적으로 정리된 도서관
  - 도서 분류 체계 (스키마)
  - 색인 카탈로그 (인덱스)
  - 대출/반납 시스템 (트랜잭션)
  - 사서 (DBMS)가 모든 것을 관리

**RDBMS vs NoSQL**:
- **RDBMS**: 엑셀처럼 행과 열이 정해진 표 (구조화된 데이터)
- **NoSQL**: 자유로운 형식의 메모장 (유연한 데이터)

## 상세 설명

### 왜 데이터베이스를 사용하는가?

**파일 시스템의 문제점**:

```
users.txt
---
1001,김철수,서울,01012341234
1002,이영희,부산,01098765432
```

| 문제 | 설명 |
|------|------|
| **데이터 중복** | 같은 정보가 여러 파일에 분산 저장 → 불일치 발생 |
| **데이터 종속성** | 파일 형식이 바뀌면 프로그램도 수정 필요 |
| **동시 접근 불가** | 여러 사용자가 동시에 수정 시 충돌 |
| **보안 취약** | 사용자별 접근 권한 관리 어려움 |
| **무결성 보장 불가** | 데이터 규칙(제약 조건) 적용 어려움 |
| **복구 어려움** | 장애 발생 시 데이터 복구 불가 |

**데이터베이스의 해결책**:

| 문제 | 해결 |
|------|------|
| 데이터 중복 | 정규화로 중복 제거 |
| 데이터 종속성 | 스키마로 데이터와 프로그램 분리 |
| 동시 접근 | 트랜잭션, 락으로 동시성 제어 |
| 보안 | 사용자별 권한 관리 (GRANT/REVOKE) |
| 무결성 | 제약 조건 (PRIMARY KEY, FOREIGN KEY, CHECK) |
| 복구 | WAL(Write-Ahead Logging), 백업/복구 |

### DBMS의 구성요소

```
┌─────────────────────────────────────────────────────┐
│                    Application                       │
│                   (Java, Python)                     │
└────────────────────────┬────────────────────────────┘
                         │ SQL Query
                         ▼
┌─────────────────────────────────────────────────────┐
│                       DBMS                           │
│  ┌─────────────┬─────────────┬─────────────┐        │
│  │ Query       │ Transaction │ Storage     │        │
│  │ Processor   │ Manager     │ Manager     │        │
│  │ (SQL 해석)  │ (ACID 보장) │ (디스크 I/O)│        │
│  └─────────────┴─────────────┴─────────────┘        │
└────────────────────────┬────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────┐
│                    Database                          │
│              (데이터 파일, 로그 파일)                 │
└─────────────────────────────────────────────────────┘
```

### RDBMS (관계형 데이터베이스)

**특징**: 데이터를 테이블(관계) 형태로 저장하고, SQL로 조작

**구성 요소**:

```
[테이블: users]
┌────────┬──────────┬────────┬─────────────┐
│ id(PK) │ name     │ email  │ dept_id(FK) │  ← 컬럼 (Column)
├────────┼──────────┼────────┼─────────────┤
│ 1001   │ 김철수   │ a@a.com│ 10          │  ← 행/레코드 (Row/Record)
│ 1002   │ 이영희   │ b@b.com│ 20          │
└────────┴──────────┴────────┴─────────────┘

[테이블: departments]
┌────────┬──────────┐
│ id(PK) │ name     │
├────────┼──────────┤
│ 10     │ 개발팀   │
│ 20     │ 마케팅   │
└────────┴──────────┘
```

**핵심 용어**:

| 용어 | 설명 | 예시 |
|------|------|------|
| **테이블 (Table)** | 데이터를 저장하는 2차원 구조 | users, orders |
| **행 (Row/Record)** | 하나의 데이터 항목 | 한 명의 사용자 정보 |
| **열 (Column/Field)** | 데이터의 속성 | id, name, email |
| **기본키 (Primary Key)** | 행을 고유하게 식별하는 컬럼 | id |
| **외래키 (Foreign Key)** | 다른 테이블을 참조하는 컬럼 | dept_id |
| **스키마 (Schema)** | 테이블 구조 정의 | CREATE TABLE 문 |

**대표 RDBMS**:

| DBMS | 특징 | 사용처 |
|------|------|--------|
| **MySQL** | 오픈소스, 빠른 읽기 | 웹 애플리케이션 |
| **PostgreSQL** | 오픈소스, 표준 준수, 확장성 | 복잡한 쿼리, GIS |
| **Oracle** | 상용, 대규모 엔터프라이즈 | 금융, 대기업 |
| **SQL Server** | Microsoft, Windows 친화 | .NET 애플리케이션 |
| **MariaDB** | MySQL 호환, 오픈소스 | MySQL 대체 |

### NoSQL (비관계형 데이터베이스)

**왜 NoSQL이 등장했는가?**

- **빅데이터**: 수억 건의 비정형 데이터 처리 필요
- **확장성**: 서버를 추가해서 쉽게 확장 (수평 확장)
- **유연성**: 스키마 변경이 잦은 경우
- **속도**: 복잡한 JOIN 없이 빠른 읽기/쓰기

**NoSQL 유형**:

#### 1. Key-Value Store

```
┌─────────────────────────────────┐
│ Key           │ Value          │
├───────────────┼────────────────┤
│ user:1001     │ {name: "김철수", age: 30} │
│ session:abc   │ {userId: 1001, expires: ...} │
└───────────────┴────────────────┘
```

- **특징**: 키로 빠르게 값 조회, 가장 단순한 구조
- **대표**: Redis, Memcached, Amazon DynamoDB
- **사용처**: 캐싱, 세션 관리, 실시간 순위

#### 2. Document Store

```json
// MongoDB 문서
{
  "_id": "1001",
  "name": "김철수",
  "address": {
    "city": "서울",
    "zipcode": "12345"
  },
  "orders": [
    {"id": 1, "product": "노트북", "price": 1500000},
    {"id": 2, "product": "마우스", "price": 50000}
  ]
}
```

- **특징**: JSON 형태로 저장, 중첩 구조 지원, 스키마 유연
- **대표**: MongoDB, CouchDB
- **사용처**: 콘텐츠 관리, 카탈로그, 사용자 프로필

#### 3. Column-Family Store

```
┌─────────┬─────────────────────────────────────────┐
│ Row Key │ Column Family: profile                   │
│         ├─────────────┬─────────────┬─────────────┤
│         │ name        │ email       │ age         │
├─────────┼─────────────┼─────────────┼─────────────┤
│ 1001    │ 김철수      │ a@a.com     │ 30          │
│ 1002    │ 이영희      │ b@b.com     │ (없음)      │
└─────────┴─────────────┴─────────────┴─────────────┘
```

- **특징**: 컬럼 단위로 저장, 대용량 데이터에 적합
- **대표**: Apache Cassandra, HBase
- **사용처**: 시계열 데이터, 로그 분석, IoT

#### 4. Graph Database

```
       ┌─────────┐
       │ 김철수  │
       └────┬────┘
            │ 친구
    ┌───────┴───────┐
    │               │
┌───▼───┐       ┌───▼───┐
│ 이영희 │◄─────►│ 박민수 │
└───────┘  친구  └───────┘
```

- **특징**: 노드와 엣지로 관계 표현, 관계 탐색에 최적화
- **대표**: Neo4j, Amazon Neptune
- **사용처**: 소셜 네트워크, 추천 시스템, 사기 탐지

### RDBMS vs NoSQL 비교

| 항목 | RDBMS | NoSQL |
|------|-------|-------|
| **데이터 모델** | 테이블 (행과 열) | Key-Value, Document, Column, Graph |
| **스키마** | 고정 스키마 (엄격) | 유연한 스키마 (Schemaless) |
| **확장 방식** | 수직 확장 (Scale-Up) | 수평 확장 (Scale-Out) |
| **트랜잭션** | ACID 보장 | BASE (Eventually Consistent) |
| **쿼리 언어** | SQL (표준화) | 제품별 다름 |
| **관계** | JOIN으로 테이블 연결 | 중첩 또는 참조로 표현 |
| **사용처** | 정형 데이터, 복잡한 관계 | 비정형 데이터, 대용량, 빠른 확장 |

**언제 무엇을 선택하는가?**

| 상황 | 선택 | 이유 |
|------|------|------|
| 금융, 결제 시스템 | RDBMS | ACID 트랜잭션 필수 |
| 복잡한 관계 쿼리 | RDBMS | JOIN 연산 강력 |
| 사용자 세션/캐시 | Redis (NoSQL) | 빠른 읽기/쓰기, 간단한 구조 |
| 로그 분석 | Elasticsearch (NoSQL) | 대용량 비정형 데이터 |
| SNS 관계 | Neo4j (NoSQL) | 관계 탐색 최적화 |
| 스타트업 초기 | MongoDB (NoSQL) | 빠른 개발, 스키마 변경 용이 |

### 기본 SQL 미리보기

RDBMS에서 데이터를 다루는 기본 명령어입니다.

```sql
-- 테이블 생성
CREATE TABLE users (
    id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 데이터 삽입
INSERT INTO users (id, name, email) VALUES (1, '김철수', 'kim@example.com');

-- 데이터 조회
SELECT * FROM users WHERE name = '김철수';

-- 데이터 수정
UPDATE users SET email = 'new@example.com' WHERE id = 1;

-- 데이터 삭제
DELETE FROM users WHERE id = 1;
```

## 트레이드오프

| 항목 | RDBMS | NoSQL |
|------|-------|-------|
| 일관성 | 강함 (ACID) | 약함 (Eventually Consistent) |
| 유연성 | 낮음 (스키마 고정) | 높음 (스키마 유연) |
| 확장성 | 수직 확장 (비용 높음) | 수평 확장 (비용 효율) |
| 복잡한 쿼리 | 강함 (JOIN, 서브쿼리) | 약함 (중첩 데이터) |
| 학습 곡선 | 낮음 (SQL 표준) | 높음 (제품별 다름) |

## 면접 예상 질문

### Q: 데이터베이스와 파일 시스템의 차이는 무엇인가요?

A: 파일 시스템은 단순히 데이터를 저장하는 반면, 데이터베이스는 **체계적인 관리 기능**을 제공합니다. **왜냐하면** 파일 시스템은 (1) 동시 접근 시 충돌 문제 (2) 데이터 중복 및 불일치 (3) 보안 및 권한 관리 어려움 (4) 장애 복구 불가 등의 문제가 있기 때문입니다. 데이터베이스는 DBMS를 통해 트랜잭션, 동시성 제어, 보안, 백업/복구 기능을 제공합니다.

### Q: RDBMS와 NoSQL의 차이를 설명해주세요.

A: RDBMS는 테이블 기반으로 데이터를 저장하고 SQL로 조작하며, ACID 트랜잭션을 보장합니다. NoSQL은 Key-Value, Document, Column, Graph 등 다양한 모델을 사용하고, 스키마가 유연하며, 수평 확장이 용이합니다. **왜냐하면** RDBMS는 데이터 일관성과 복잡한 관계 쿼리에 최적화되어 있고, NoSQL은 대용량 비정형 데이터와 빠른 확장에 최적화되어 있기 때문입니다. **선택 기준**: 금융/결제는 RDBMS, 캐시/로그는 NoSQL이 적합합니다.

### Q: 기본키(Primary Key)와 외래키(Foreign Key)의 차이는?

A: **기본키**는 테이블 내에서 각 행을 고유하게 식별하는 컬럼으로, NULL 불가, 중복 불가입니다. **외래키**는 다른 테이블의 기본키를 참조하여 테이블 간 관계를 정의합니다. **왜냐하면** 기본키는 "이 행이 누구인지"를 정의하고, 외래키는 "이 행이 누구와 연결되는지"를 정의하기 때문입니다. **예시**: users 테이블의 id가 기본키, orders 테이블의 user_id가 users.id를 참조하는 외래키입니다.

### Q: 스키마(Schema)란 무엇인가요?

A: 스키마는 데이터베이스의 구조를 정의한 것입니다. 테이블 이름, 컬럼 이름과 타입, 제약 조건(PK, FK, NOT NULL, UNIQUE 등)을 포함합니다. **왜냐하면** 스키마가 있어야 데이터의 형태와 규칙이 정해지고, DBMS가 데이터 무결성을 검증할 수 있기 때문입니다. **예시**: `CREATE TABLE users (id INT PRIMARY KEY, name VARCHAR(100) NOT NULL)`이 스키마를 정의하는 DDL입니다.

### Q: NoSQL을 언제 사용하나요?

A: (1) **대용량 비정형 데이터**: 로그, 소셜 미디어 데이터 (2) **빠른 확장이 필요할 때**: 서버 추가로 쉽게 확장 (3) **스키마가 자주 변경될 때**: 빠른 개발, MVP 단계 (4) **특정 용도에 최적화**: 캐싱(Redis), 검색(Elasticsearch), 관계 탐색(Neo4j). **왜냐하면** RDBMS는 스키마 변경이 어렵고, 수평 확장이 제한적이며, 비정형 데이터 처리에 비효율적이기 때문입니다. 단, 트랜잭션이 중요한 금융 시스템은 RDBMS가 적합합니다.

## 연관 문서

| 문서 | 연관성 | 난이도 |
|------|--------|--------|
| [SQL](./sql.md) | RDBMS에서 데이터 조작 | [2] 입문 |
| [Index](./index.md) | 조회 성능 최적화 | [3] 중급 |
| [Transaction](./transaction.md) | ACID, 동시성 제어 | [3] 중급 |
| [Normalization](./normalization.md) | 테이블 설계 | [3] 중급 |
| [NoSQL](./nosql.md) | NoSQL 심화 | [4] 심화 |

## 참고 자료

- [Database System Concepts - Silberschatz](https://www.db-book.com/)
- [MySQL 공식 문서](https://dev.mysql.com/doc/)
- [PostgreSQL 공식 문서](https://www.postgresql.org/docs/)
- [MongoDB 공식 문서](https://www.mongodb.com/docs/)
- [Redis 공식 문서](https://redis.io/docs/)
