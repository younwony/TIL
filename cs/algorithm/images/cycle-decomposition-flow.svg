<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="startGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2ECC71"/>
      <stop offset="100%" style="stop-color:#27AE60"/>
    </linearGradient>
    <linearGradient id="processGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498DB"/>
      <stop offset="100%" style="stop-color:#2980B9"/>
    </linearGradient>
    <linearGradient id="decisionGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E67E22"/>
      <stop offset="100%" style="stop-color:#D35400"/>
    </linearGradient>
    <linearGradient id="endGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6"/>
      <stop offset="100%" style="stop-color:#8E44AD"/>
    </linearGradient>
    <marker id="arrowHead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#7f8c8d"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50" text-anchor="middle">사이클 분해 알고리즘 흐름</text>

  <!-- Step 1: Start -->
  <rect x="50" y="70" width="160" height="50" fill="url(#startGrad)" rx="25"/>
  <text x="130" y="100" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">시작</text>

  <!-- Arrow 1 -->
  <line x1="210" y1="95" x2="280" y2="95" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>

  <!-- Step 2: Initialize -->
  <rect x="290" y="70" width="200" height="50" fill="url(#processGrad)" rx="8"/>
  <text x="390" y="92" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle">visited[] = false</text>
  <text x="390" y="108" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle">cycles = []</text>

  <!-- Arrow 2 -->
  <line x1="490" y1="95" x2="560" y2="95" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>

  <!-- Step 3: Loop start -->
  <rect x="570" y="70" width="180" height="50" fill="url(#processGrad)" rx="8"/>
  <text x="660" y="100" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle">i = 0 to n-1</text>

  <!-- Arrow 3 -->
  <path d="M660 120 L660 160" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>

  <!-- Step 4: Decision - visited? -->
  <polygon points="660,175 750,220 660,265 570,220" fill="url(#decisionGrad)"/>
  <text x="660" y="217" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">visited[i]?</text>
  <text x="660" y="232" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">확인</text>

  <!-- Arrow Yes (skip) -->
  <line x1="750" y1="220" x2="830" y2="220" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>
  <text x="790" y="210" font-family="Arial, sans-serif" font-size="11" fill="#2ECC71">Yes</text>

  <!-- Skip box -->
  <rect x="840" y="195" width="50" height="50" fill="#ecf0f1" rx="8" stroke="#bdc3c7"/>
  <text x="865" y="225" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d" text-anchor="middle">skip</text>

  <!-- Arrow from skip to loop -->
  <path d="M865 245 L865 290 L810 290 L810 95 L750 95" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)" fill="none"/>

  <!-- Arrow No (continue) -->
  <line x1="660" y1="265" x2="660" y2="305" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>
  <text x="675" y="290" font-family="Arial, sans-serif" font-size="11" fill="#E74C3C">No</text>

  <!-- Step 5: Start cycle tracking -->
  <rect x="560" y="315" width="200" height="50" fill="url(#processGrad)" rx="8"/>
  <text x="660" y="337" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">current = i</text>
  <text x="660" y="353" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">cycle = []</text>

  <!-- Arrow 5 -->
  <line x1="560" y1="340" x2="480" y2="340" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>

  <!-- Step 6: Inner loop decision -->
  <polygon points="390,310 480,355 390,400 300,355" fill="url(#decisionGrad)"/>
  <text x="390" y="350" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">visited</text>
  <text x="390" y="365" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">[current]?</text>

  <!-- Arrow No (track cycle) -->
  <line x1="300" y1="355" x2="220" y2="355" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>
  <text x="260" y="345" font-family="Arial, sans-serif" font-size="11" fill="#E74C3C">No</text>

  <!-- Step 7: Track cycle -->
  <rect x="50" y="310" width="160" height="90" fill="url(#processGrad)" rx="8"/>
  <text x="130" y="335" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">visited[current] = true</text>
  <text x="130" y="355" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">cycle.add(current)</text>
  <text x="130" y="375" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">current = P[current]</text>
  <text x="130" y="393" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">(다음 원소로 이동)</text>

  <!-- Arrow loop back -->
  <path d="M130 400 L130 430 L390 430 L390 400" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)" fill="none"/>

  <!-- Arrow Yes (cycle complete) -->
  <line x1="390" y1="310" x2="390" y2="260" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)"/>
  <text x="405" y="285" font-family="Arial, sans-serif" font-size="11" fill="#2ECC71">Yes</text>

  <!-- Step 8: Save cycle -->
  <rect x="290" y="195" width="200" height="55" fill="url(#processGrad)" rx="8"/>
  <text x="390" y="218" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">사이클 완성!</text>
  <text x="390" y="238" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">cycles.add(cycle)</text>

  <!-- Arrow to next iteration -->
  <path d="M290 220 L260 220 L260 145 L570 145 L570 70" stroke="#7f8c8d" stroke-width="2" fill="none"/>
  <polygon points="570,70 565,80 575,80" fill="#7f8c8d"/>
  <text x="400" y="138" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">다음 i로</text>

  <!-- End -->
  <rect x="50" y="440" width="160" height="50" fill="url(#endGrad)" rx="25"/>
  <text x="130" y="467" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">완료: cycles 반환</text>

  <!-- Arrow to end -->
  <path d="M810 320 L810 465 L220 465" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowHead)" fill="none"/>
  <text x="500" y="455" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">모든 정점 방문 완료</text>

  <!-- Legend -->
  <rect x="50" y="140" width="180" height="100" fill="white" stroke="#bdc3c7" rx="5"/>
  <text x="60" y="158" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2c3e50">범례</text>

  <rect x="60" y="168" width="15" height="15" fill="url(#startGrad)" rx="7"/>
  <text x="80" y="180" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">시작/종료</text>

  <rect x="60" y="188" width="15" height="15" fill="url(#processGrad)" rx="3"/>
  <text x="80" y="200" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">처리</text>

  <polygon points="67,220 75,213 83,220 75,227" fill="url(#decisionGrad)"/>
  <text x="95" y="223" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">조건 분기</text>
</svg>