%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e1f5fe', 'primaryTextColor': '#333', 'primaryBorderColor': '#0288d1', 'lineColor': '#333', 'secondaryColor': '#f3e5f5', 'tertiaryColor': '#fff3e0'}}}%%
flowchart TB
    subgraph Rolling["1. Rolling Deployment (순차 배포)"]
        direction LR
        R1["v1"] --> R2["v2"]
        R3["v1"] --> R4["v1"]
        R5["하나씩 교체"]
    end

    subgraph BlueGreen["2. Blue-Green Deployment"]
        direction TB
        Blue["Blue (현재) v1 ← 트래픽"]
        Green["Green (대기) v2"]
        Switch["⟳ 스위치"]
        Blue --> Switch
        Switch --> Green2["Green (현재) v2 ← 트래픽"]
    end

    subgraph Canary["3. Canary Deployment"]
        direction TB
        C1["v1 (95%) ████████████████"]
        C2["v2 (5%) █"]
        Arrow["↓ 점진적 증가"]
        C3["v1 (50%) ████████"]
        C4["v2 (50%) ████████"]
        C1 --> Arrow
        C2 --> Arrow
        Arrow --> C3
        Arrow --> C4
    end

    style Rolling fill:#e3f2fd,stroke:#1976d2
    style BlueGreen fill:#e8f5e9,stroke:#388e3c
    style Canary fill:#fff3e0,stroke:#f57c00
